{{ define "main" }}
<!-- About Section -->
<section class="hero">
  <div class="hero-layout">
    <div class="hero-text">
      <h1>{{ .Site.Params.homeIntroTitle }}</h1>

      {{ with .Site.Params.homeIntroContent }}
      <p>{{ . | markdownify }}</p>
      {{ end }}
      <div class="hero-links">
        {{ with .Site.Params.social }}
        {{- range . }}
        <a href="{{ trim .url " " | safeURL }}" target="_blank" rel="noopener noreferrer me"
          title="{{ (.title | default .name) | title }}">
          {{- .svg | safeHTML }}
          {{- .name }}
        </a>
        {{- end }}
        {{ end }}
      </div>
    </div>
    <div class="hero-avatar">
      {{ $image := resources.Get "images/avatar.png" }}
      <img src="{{ $image.RelPermalink }}" alt="Avatar">
    </div>
  </div>
</section>

<!-- Featured Projects -->
<section id="projects">
  <div class="section-header">
    <h2>Featured Projects</h2>
  </div>
  <div class="projects-grid">
    {{ range where .Site.Data.projects.projects "featured" true }}
    <a href="{{ .url }}" class="project-card" rel="noopener noreferrer" target="_blank">
      <div class="project-cover">
        {{ $image := resources.Get .image }}
        {{ $image := $image.Resize .image_resize }}
        <!-- { $image := $image.Crop "96x96" } -->
        <img src="{{ $image.RelPermalink }}" alt="{{ .name }}" class="project-image">
      </div>
      <div class="project-info">
        <h3>{{ .name }}</h3>
        <p>{{ .featured_text }}</p>
      </div>
    </a>
    {{ end }}
    <!--
<a href="#" class="project-card sponsor-card">
<div class="project-cover"></div>
<div class="project-info">
<h3>
<svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" aria-hidden="true"><path d="M12 21.35 10.55 20.03C5.4 15.36 2 12.28 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35Z"/></svg>
Sponsor this work
</h3>
<p>Help fund more open source and writing.</p>
</div>
</a>
-->
  </div>
</section>

<!-- Open Source -->
<section id="opensource">
  <div class="section-header">
    <h2>Open Source</h2>
  </div>
  <div class="list-items">
    {{ range where .Site.Data.projects.projects "featured" false }}
    <a href="{{ .url }}" class="list-item" rel="noopener noreferrer" target="_blank">
      <div class="list-item-left">
        <h3>{{ .name }}</h3>
        <p>{{ .text }}</p>
      </div>
      <div class="list-item-right">{{ .tag }}</div>
    </a>
    {{ end }}
    <a href="https://github.com/qbart?tab=repositories" class="list-item">
      <div class="list-item-left">
        <h3>Browse others...</h3>
      </div>
      <div class="list-item-right">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true"><path d="M12 0C5.373 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.6.111.793-.262.793-.578v-2.233C6.073 21.319 5.322 19.05 5.322 19.05c-.546-1.387-1.333-1.756-1.333-1.756-1.09-.745.083-.73.083-.73 1.205.085 1.84 1.238 1.84 1.238 1.07 1.833 2.806 1.304 3.492.997.108-.776.418-1.305.762-1.604-2.665-.305-5.466-1.335-5.466-5.931 0-1.31.469-2.382 1.236-3.221-.124-.304-.535-1.524.117-3.176 0 0 1.008-.322 3.3 1.23a11.52 11.52 0 0 1 3.004-.404 11.53 11.53 0 0 1 3.006.404c2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.873.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.626-5.479 5.921.43.372.824 1.103.824 2.223v3.293c0 .316.193.689.8.577C20.565 21.8 24 17.302 24 12 24 5.373 18.627 0 12 0Z"/></svg>
      </div>
    </a>
  </div>
</section>

<!-- Archives / Posts -->
<section id="archives">
  <div class="section-header">
    <h2>Writing</h2>
  </div>
  <div class="list-items">
    {{ $pages := where .Site.RegularPages "Section" "posts" }}
    {{ range $index, $page := $pages }}
    {{ if eq $page.Params.pinned true }}
    <a href="{{ .RelPermalink }}" class="list-item">
      <div class="list-item-left">
        <h3>{{ .LinkTitle }}</h3>
      </div>
      <div class="list-item-right">
        {{ .Date | time.Format site.Params.listDateFormat }}
      </div>
    </a>
    {{ end }}
    {{ end }}
    <a href="/posts/" class="list-item">
      <div class="list-item-left">
        <h3>Read more...</h3>
      </div>
      <div class="list-item-right">Archive</div>
    </a>
  </div>
</section>


<script>
document.addEventListener('DOMContentLoaded', () => {
  const sponsorCard = document.querySelector('.sponsor-card');
  if (!sponsorCard) return;

  let heartTimer;

  const spawnHeart = () => {
    const heart = document.createElement('span');
    heart.className = 'heart';
    heart.textContent = 'â¤';
    const size = 12 + Math.random() * 6;
    heart.style.fontSize = `${size}px`;
    heart.style.left = `${10 + Math.random() * 80}%`;
    heart.style.setProperty('--heart-rotate', `${-10 + Math.random() * 20}deg`);
    heart.style.animationDuration = `${1.3 + Math.random() * 0.5}s`;
    heart.addEventListener('animationend', () => heart.remove());
    sponsorCard.appendChild(heart);
  };

  sponsorCard.addEventListener('mouseenter', () => {
    spawnHeart();
    heartTimer = setInterval(spawnHeart, 100);
  });

  sponsorCard.addEventListener('mouseleave', () => {
    clearInterval(heartTimer);
  });
});
</script>
{{ end }}

